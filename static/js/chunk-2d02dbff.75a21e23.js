(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d02dbff"],{"1fe8":function(t,e,n){"use strict";n("ecb4")},c1fb:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"d",(function(){return h}));n("d3b7");var i=n("bc3a"),o=n.n(i);function a(t,e){return new Promise((function(n,i){o.a.get(t,{params:e,headers:{token:sessionStorage.getItem("token")}}).then((function(t){n(t.data)})).catch((function(t){i(t.data)}))}))}function r(t,e){return new Promise((function(n,i){o()({method:"post",url:t,data:e}).then((function(t){n(t.data)})).catch((function(t){i(t.data)}))}))}function u(){return new Promise((function(t,e){a("/index.php/index/Yimi/getTuList").then((function(e){t(e.data)})).catch((function(t){e(t)}))}))}function c(t){return new Promise((function(e,n){r("/index.php/index/Yimi/addTu",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function s(t){return new Promise((function(e,n){r("/index.php/index/Yimi/delTu",{id:t}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function d(t){return new Promise((function(e,n){a("/index.php/index/Yimi/getGoodsList",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function l(t){return new Promise((function(e,n){r("/index.php/index/Yimi/addGoods",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function f(t){return new Promise((function(e,n){r("/index.php/index/Yimi/delGoods",{id:t}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function p(t){return new Promise((function(e,n){a("/index.php/index/Yimi/getOrderList",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function h(t){return new Promise((function(e,n){r("/index.php/index/Yimi/delOrder",{id:t}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}o.a.defaults.timeout=3e4,o.a.defaults.baseURL="https://testshool.zzgoodqc.cn",o.a.interceptors.response.use((function(t){if(200==t.status)return t}),(function(t){return Promise.reject(t)}))},cec8:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"box"}},[t._v(" 图片："),n("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入图片地址"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),n("div",{staticClass:"custom-select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedOption=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"请选择照片类型"}},[t._v(t._s(t.selectedOption))]),n("option",{attrs:{value:"1"}},[t._v("首页")]),n("option",{attrs:{value:"2"}},[t._v("分类")]),n("option",{attrs:{value:"3"}},[t._v("服务--默认是首页")])])]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.uploadImage}},[t._v("添加图片")])],1),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"ID",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.id))])]}}])}),n("el-table-column",{attrs:{label:"图片模板",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{"margin-left":"10px",width:"20px",height:"20px"},attrs:{src:"https://testshool.zzgoodqc.cn"+t.row.imgurl,alt:""}})]}}])}),n("el-table-column",{attrs:{label:"图片类型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(1==e.row.type?"首页":1==e.row.type?"分类":"服务"))])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),n("div",{staticClass:"overlay",class:0==t.type?"a":"b",attrs:{id:"overlay"}},[n("div",{staticClass:"modal",attrs:{id:"modal"}},[n("h4",[t._v("是否确认删除")]),n("div",{attrs:{id:"btnbox"}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.querenFun}},[t._v("确认")]),n("el-button",{attrs:{type:"danger",round:""},on:{click:t.quxiaoFun}},[t._v("取消")])],1)])])])},o=[],a=n("c7eb"),r=n("1da1"),u=(n("e9c4"),n("d3b7"),n("c1fb")),c={data:function(){return{type:0,tableData:[],tableDataTwo:[],modalID:"",modalimg:"",modalstatus:"",input:"",inpID:"",selectedOption:"请选择照片类型",index:""}},mounted:function(){this.jiekou()},methods:{handleDelete:function(t,e){console.log(t),this.index=t,this.type=1},quxiaoFun:function(){this.type=0},querenFun:function(){var t=this,e=this.index,n=this.tableData[e].id;Object(u["a"])(n).then((function(e){console.log(e),t.jiekou(),t.type=0}))},jiekou:function(){var t=this;Object(u["c"])().then((function(e){console.log(e.data),t.tableData=e.data}))},uploadImage:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){var n,i,o,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.imageUrlToBase64(t.input);case 3:return n=e.sent,e.next=6,fetch("https://testshool.zzgoodqc.cn/index.php/index/upload/uploadimg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imgurl:n})});case 6:if(i=e.sent,!i.ok){e.next=17;break}return console.log("图片上传成功"),e.next=11,i.json();case 11:o=e.sent,console.log("接口返回的数据:",o.data.url),r={imgurl:o.data.url,type:t.selectedOption},Object(u["b"])(r).then((function(e){console.log(e),t.jiekou(),t.input="",t.selectedOption="请选择照片类型"})),e.next=18;break;case 17:console.error("图片上传失败");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](0),console.error("图片转换失败:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))()},imageUrlToBase64:function(t){return Object(r["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=i.width,t.height=i.height,n.drawImage(i,0,0);var o=t.toDataURL("image/jpeg");e(o)},i.onerror=function(){n(new Error("加载图片失败"))},i.src=t})));case 1:case"end":return e.stop()}}),e)})))()}}},s=c,d=(n("1fe8"),n("2877")),l=Object(d["a"])(s,i,o,!1,null,null,null);e["default"]=l.exports},e9c4:function(t,e,n){var i=n("23e7"),o=n("d066"),a=n("d039"),r=o("JSON","stringify"),u=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,s=/^[\uDC00-\uDFFF]$/,d=function(t,e,n){var i=n.charAt(e-1),o=n.charAt(e+1);return c.test(t)&&!s.test(o)||s.test(t)&&!c.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},l=a((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&i({target:"JSON",stat:!0,forced:l},{stringify:function(t,e,n){var i=r.apply(null,arguments);return"string"==typeof i?i.replace(u,d):i}})},ecb4:function(t,e,n){}}]);