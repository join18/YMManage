(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60fe9172"],{"2f4f":function(t,e,n){"use strict";n("5602")},5602:function(t,e,n){},c1fb:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"e",(function(){return m})),n.d(e,"d",(function(){return f}));n("d3b7");var a=n("bc3a"),i=n.n(a);function o(t,e){return new Promise((function(n,a){i.a.get(t,{params:e,headers:{token:sessionStorage.getItem("token")}}).then((function(t){n(t.data)})).catch((function(t){a(t.data)}))}))}function r(t,e){return new Promise((function(n,a){i()({method:"post",url:t,data:e}).then((function(t){n(t.data)})).catch((function(t){a(t.data)}))}))}function l(){return new Promise((function(t,e){o("/index.php/index/Yimi/getTuList").then((function(e){t(e.data)})).catch((function(t){e(t)}))}))}function c(t){return new Promise((function(e,n){r("/index.php/index/Yimi/addTu",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function s(t){return new Promise((function(e,n){r("/index.php/index/Yimi/delTu",{id:t}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function u(t){return new Promise((function(e,n){o("/index.php/index/Yimi/getGoodsList",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function d(t){return new Promise((function(e,n){r("/index.php/index/Yimi/addGoods",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function p(t){return new Promise((function(e,n){r("/index.php/index/Yimi/delGoods",{id:t}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function m(t){return new Promise((function(e,n){o("/index.php/index/Yimi/getOrderList",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function f(t){return new Promise((function(e,n){r("/index.php/index/Yimi/delOrder",{id:t}).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}i.a.defaults.timeout=3e4,i.a.defaults.baseURL="https://testshool.zzgoodqc.cn",i.a.interceptors.response.use((function(t){if(200==t.status)return t}),(function(t){return Promise.reject(t)}))},e9c4:function(t,e,n){var a=n("23e7"),i=n("d066"),o=n("d039"),r=i("JSON","stringify"),l=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,s=/^[\uDC00-\uDFFF]$/,u=function(t,e,n){var a=n.charAt(e-1),i=n.charAt(e+1);return c.test(t)&&!s.test(i)||s.test(t)&&!c.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},d=o((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&a({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,n){var a=r.apply(null,arguments);return"string"==typeof a?a.replace(l,u):a}})},f2e2:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"addbox"}},[t._v(" 图片："),n("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入图片地址"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" 服务名字： "),n("el-input",{staticStyle:{width:"110px"},attrs:{placeholder:"请输入服务名字"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" 服务详情： "),n("el-input",{staticStyle:{width:"110px"},attrs:{placeholder:"请输入服务详情"},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}}),t._v(" 单价： "),n("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入单价"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),t._v(" 备注： "),n("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入备注"},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}}),n("div",{staticClass:"custom-select",staticStyle:{"margin-left":"10px"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.hot,expression:"hot"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.hot=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"请选择是否热门"}},[t._v(t._s(t.hot))]),n("option",{attrs:{value:"1"}},[t._v("是")]),n("option",{attrs:{value:"2"}},[t._v("否")])])]),n("div",{staticClass:"custom-select",staticStyle:{"margin-left":"20px"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedOption=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"请选择照片类型"}},[t._v(t._s(t.selectedOption))]),n("option",{attrs:{value:"1"}},[t._v("代购")]),n("option",{attrs:{value:"2"}},[t._v("代排队")]),n("option",{attrs:{value:"3"}},[t._v("代送")]),n("option",{attrs:{value:"4"}},[t._v("租赁")]),n("option",{attrs:{value:"5"}},[t._v("快递代取")])])]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.uploadImage}},[t._v("添加图片")])],1),n("div",{attrs:{id:"box"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"ID",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.id))])]}}])}),n("el-table-column",{attrs:{label:"图片地址",width:"140"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{"margin-left":"10px",width:"20px",height:"20px"},attrs:{src:t.row.url,alt:""}})]}}])}),n("el-table-column",{attrs:{label:"服务名字",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{label:"服务详情描述",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.details))])]}}])}),n("el-table-column",{attrs:{label:"单价",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.price))])]}}])}),n("el-table-column",{attrs:{label:"备注",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.mark))])]}}])}),n("el-table-column",{attrs:{label:"类型",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(1==e.row.type?"代购":2==e.row.type?"代排队":3==e.row.type?"代送":4==e.row.type?"租赁":"快递代取"))])]}}])}),n("el-table-column",{attrs:{label:"是否是热门服务",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(1==e.row.remen?"是":"否"))])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.dellist(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),n("div",{staticClass:"overlay",class:0==t.type?"a":"b",attrs:{id:"overlay"}},[n("div",{staticClass:"modal",attrs:{id:"modal"}},[n("h1",[t._v("更新数据")]),t._v(" 商品图片："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入商品图片"},model:{value:t.modalimg,callback:function(e){t.modalimg=e},expression:"modalimg"}}),n("br"),t._v(" 商品名字："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入商品名字"},model:{value:t.myname,callback:function(e){t.myname=e},expression:"myname"}}),n("br"),t._v(" 服务详情："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入服务详情"},model:{value:t.mydetails,callback:function(e){t.mydetails=e},expression:"mydetails"}}),n("br"),t._v(" 商品单价："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入商品单价"},model:{value:t.myprice,callback:function(e){t.myprice=e},expression:"myprice"}}),n("br"),t._v(" 商品备注："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入商品备注"},model:{value:t.mymark,callback:function(e){t.mymark=e},expression:"mymark"}}),n("br"),t._v(" 商品类型："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入商品类型"},model:{value:t.mytype,callback:function(e){t.mytype=e},expression:"mytype"}}),n("br"),t._v(" 是否热门："),n("el-input",{staticStyle:{width:"200px","margin-top":"15px"},attrs:{placeholder:"请输入是否热门"},model:{value:t.myhot,callback:function(e){t.myhot=e},expression:"myhot"}}),n("div",{attrs:{id:"btnbox"}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.xiugaiFun}},[t._v("确认修改")]),n("el-button",{attrs:{type:"danger",round:""},on:{click:t.quxiaoFun}},[t._v("取消修改")])],1)],1)]),n("div",{staticClass:"overlayTwo",class:0==t.typeTwo?"a1":"b1",attrs:{id:"overlayTwo"}},[n("div",{staticClass:"modalTwo",attrs:{id:"modalTwo"}},[n("h4",[t._v("是否确认删除")]),n("div",{attrs:{id:"btnboxTwo"}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.querenFun}},[t._v("确认")]),n("el-button",{attrs:{type:"danger",round:""},on:{click:t.quxiaoFunTwo}},[t._v("取消")])],1)])]),n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:t.afterFun}},[t._v("上一页")]),n("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.page))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.beforFun}},[t._v("下一页"),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)},i=[],o=n("c7eb"),r=n("1da1"),l=(n("b0c0"),n("e9c4"),n("d3b7"),n("c1fb")),c={data:function(){return{type:0,typeTwo:0,tableData:[],modalimg:"",modalID:"",input:"",name:"",details:"",price:"",notes:"",hot:"请选择是否热门",selectedOption:"请选择照片类型",mydetails:"",myprice:"",mymark:"",mytype:"",myhot:"",myname:"",index:"",page:1,pagelimit:5,datalength:""}},mounted:function(){this.datalengthFun(),this.datalist()},methods:{afterFun:function(){console.log(222),1==this.page?alert("已经是第一页了"):(this.page--,this.datalist())},beforFun:function(){console.log(11);var t=Math.ceil(this.datalength/this.pagelimit);this.page==t?alert("已经是最后一页了"):(this.page++,this.datalist())},handleEdit:function(t,e){var n=this;this.type=1,Object(l["h"])().then((function(e){console.log(e.data),n.modalID=e.data[t].id,n.modalimg=e.data[t].url,n.myname=e.data[t].name,n.mydetails=e.data[t].details,n.myprice=e.data[t].price,n.mymark=e.data[t].mark,n.mytype=e.data[t].type,n.myhot=e.data[t].remen,n.type=1}))},quxiaoFun:function(){this.type=0},xiugaiFun:function(){var t=this,e={id:this.modalID,name:this.myname,url:this.modalimg,details:this.mydetails,price:this.myprice,mark:this.mymark,type:this.mytype,remen:this.myhot};Object(l["f"])(e).then((function(e){console.log(e),t.datalist()})),this.type=0},datalengthFun:function(){var t=this;Object(l["h"])().then((function(e){console.log(e.data),t.datalength=e.data.length}))},datalist:function(){var t=this,e={page:this.page,pagelimit:this.pagelimit};Object(l["h"])(e).then((function(e){console.log(e.data),t.tableData=e.data}))},dellist:function(t,e){this.index=t,this.typeTwo=1},quxiaoFunTwo:function(){this.typeTwo=0},querenFun:function(){var t=this,e=this.index,n=this.tableData[e].id;Object(l["g"])(n).then((function(e){t.datalist(),t.typeTwo=0}))},uploadImage:function(){var t=this;return Object(r["a"])(Object(o["a"])().mark((function e(){var n,a,i,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.imageUrlToBase64(t.input);case 3:return n=e.sent,e.next=6,fetch("https://testshool.zzgoodqc.cn/index.php/index/upload/uploadimg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imgurl:n})});case 6:if(a=e.sent,!a.ok){e.next=17;break}return console.log("图片上传成功"),e.next=11,a.json();case 11:i=e.sent,console.log("接口返回的数据:",i.data.url),r={url:"https://testshool.zzgoodqc.cn"+i.data.url,type:t.selectedOption,name:t.name,details:t.details,price:t.price,mark:t.notes,remen:t.hot},Object(l["f"])(r).then((function(e){console.log(e),t.datalist(),t.input="",t.selectedOption="请选择照片类型"})),e.next=18;break;case 17:console.error("图片上传失败");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](0),console.error("图片转换失败:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))()},imageUrlToBase64:function(t){return Object(r["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=a.width,t.height=a.height,n.drawImage(a,0,0);var i=t.toDataURL("image/jpeg");e(i)},a.onerror=function(){n(new Error("加载图片失败"))},a.src=t})));case 1:case"end":return e.stop()}}),e)})))()}}},s=c,u=(n("2f4f"),n("2877")),d=Object(u["a"])(s,a,i,!1,null,null,null);e["default"]=d.exports}}]);